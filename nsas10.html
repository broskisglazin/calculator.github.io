<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NORTHSTAR AS10</title>

<style>
  :root{ color-scheme: dark; }

  body{
    margin:0;
    min-height:100vh;
    display:grid;
    place-items:center;
    background:
      radial-gradient(1200px 900px at 25% 15%, rgba(255,255,255,.06), transparent 60%),
      radial-gradient(900px 700px at 80% 70%, rgba(255,255,255,.04), transparent 55%),
      linear-gradient(180deg, #06060a 0%, #040406 100%);
    color:#eef;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  }

  /* Subtle framing like the brand page */
  .stage{
    width: min(980px, 92vw);
    padding: 34px 0 48px;
    display:grid;
    place-items:center;
    gap:18px;
  }

  /* "Northstar Industries" vibe: stark, centered, spaced */
  .brand{
    text-align:center;
    user-select:none;
    display:grid;
    gap:8px;
    place-items:center;
  }

  .brandMark{
    width: min(520px, 86vw);
    height: auto;
    display:block;
    border-radius: 14px;
    box-shadow:
      0 18px 70px rgba(0,0,0,.55),
      0 0 0 1px rgba(255,255,255,.06);
    opacity: .98;
  }

  .brandSub{
    font-size: 12px;
    letter-spacing: .42em;
    text-transform: uppercase;
    opacity: .78;
  }

  .calc{
    width: 460px;
    padding: 18px;
    border-radius: 24px;
    background: linear-gradient(180deg, rgba(18,18,24,.92), rgba(10,10,14,.92));
    border: 1px solid rgba(255,255,255,.10);
    box-shadow:
      0 32px 90px rgba(0,0,0,.65),
      inset 0 1px 0 rgba(255,255,255,.06);
    position:relative;
    overflow:hidden;
  }

  /* A barely-there sheen, not gamer RGB */
  .calc:before{
    content:"";
    position:absolute;
    inset:-2px;
    background:
      radial-gradient(900px 240px at 50% 0%, rgba(255,255,255,.06), transparent 60%);
    pointer-events:none;
  }

  .top{
    display:flex;
    gap:14px;
    margin-bottom:16px;
    position:relative;
    z-index:1;
  }

  .solar{
    width: 175px;
    height: 64px;
    border-radius: 12px;
    background:
      repeating-linear-gradient(90deg, rgba(255,255,255,.09) 0 2px, transparent 2px 10px),
      linear-gradient(135deg,#2b221a,#120f0c);
    border:1px solid rgba(255,255,255,.12);
    box-shadow:
      inset 0 2px 6px rgba(0,0,0,.65),
      0 8px 22px rgba(0,0,0,.45);
  }

  /* Display: more "instrument" than toy */
  .display{
    flex:1;
    height: 64px;
    border-radius: 12px;
    background: linear-gradient(#7c8b74,#5b6a55);
    border: 1px solid rgba(0,0,0,.42);
    box-shadow:
      inset 0 2px 0 rgba(255,255,255,.16),
      inset 0 -12px 18px rgba(0,0,0,.28),
      0 8px 22px rgba(0,0,0,.40);
    padding: 0 12px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    position:relative;
  }

  /* faint glass glare line */
  .display:after{
    content:"";
    position:absolute;
    inset:0;
    background: linear-gradient(120deg, transparent 0 45%, rgba(255,255,255,.08) 52%, transparent 60%);
    opacity:.35;
    pointer-events:none;
  }

  #seg{
    width: 100%;
    height: 100%;
    display:block;
    position:relative;
    z-index:1;
  }

  .keys{
    display:grid;
    grid-template-columns: repeat(10,1fr);
    gap: 10px;
    margin-top: 18px;
    position:relative;
    z-index:1;
  }

  .bottom{
    display:grid;
    grid-template-columns: repeat(4,1fr);
    gap: 12px;
    margin-top: 14px;
    position:relative;
    z-index:1;
  }

  button{
    height: 58px;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,.12);
    background: linear-gradient(#262632,#161620);
    color:#eef;
    font-size: 18px;
    cursor:pointer;
    box-shadow:
      0 8px 0 rgba(0,0,0,.42),
      0 14px 26px rgba(0,0,0,.28),
      inset 0 1px 0 rgba(255,255,255,.06);
    user-select:none;
    letter-spacing:.02em;
  }
  button:hover{
    filter: brightness(1.07);
    border-color: rgba(255,255,255,.16);
  }
  button:active{
    transform: translateY(4px);
    box-shadow:
      0 4px 0 rgba(0,0,0,.42),
      0 10px 18px rgba(0,0,0,.22),
      inset 0 1px 0 rgba(255,255,255,.05);
  }

  /* Make ops feel “engraved” not colorful */
  .op{
    background: linear-gradient(#1f2632,#141a22);
    border-color: rgba(255,255,255,.12);
  }
  .eq{
    background: linear-gradient(#1c2a22,#121a16);
    border-color: rgba(255,255,255,.12);
  }
  .clear{
    background: linear-gradient(#2a1b1b,#1a1111);
    border-color: rgba(255,255,255,.12);
  }

  @media (max-width: 520px){
    .calc{ width: min(460px, 92vw); }
  }
</style>
</head>

<body>
  <div class="stage">
    <div class="brand">
      <!-- Put your actual brand PNG here (recommended). -->
      <!-- If you want it embedded as base64 like before, tell me and I’ll paste it in. -->
      <img class="brandMark" src="./northstar-industries.png" alt="Northstar Industries">
      <div class="brandSub">NS-AS10 SOLAR</div>
    </div>

    <div class="calc">
      <div class="top">
        <div class="solar"></div>
        <div class="display">
          <svg id="seg" viewBox="0 0 340 64" preserveAspectRatio="xMidYMid meet" aria-hidden="true"></svg>
        </div>
      </div>

      <div class="keys" id="keys">
        <button data-k="0">0</button><button data-k="1">1</button><button data-k="2">2</button>
        <button data-k="3">3</button><button data-k="4">4</button><button data-k="5">5</button>
        <button data-k="6">6</button><button data-k="7">7</button><button data-k="8">8</button>
        <button data-k="9">9</button>
      </div>

      <div class="bottom" id="bottom">
        <button class="op" data-k="+">+</button>
        <button class="op" data-k="-">−</button>
        <button class="eq" data-k="=">=</button>
        <button class="clear" data-k="C">C</button>
      </div>
    </div>
  </div>

<script>
  const svg = document.getElementById("seg");

  let current = "0";
  let total = 0;
  let op = null;
  let reset = false;

  const MAX_DIGITS = 10;

  // error / blink state
  let overflow = false;
  let blinkPhase = true; // toggles to blink OFLO
  const BLINK_MS = 500;

  // 7-seg mapping (a b c d e f g)
  const DIG = {
    "0": [1,1,1,1,1,1,0],
    "1": [0,1,1,0,0,0,0],
    "2": [1,1,0,1,1,0,1],
    "3": [1,1,1,1,0,0,1],
    "4": [0,1,1,0,0,1,1],
    "5": [1,0,1,1,0,1,1],
    "6": [1,0,1,1,1,1,1],
    "7": [1,1,1,0,0,0,0],
    "8": [1,1,1,1,1,1,1],
    "9": [1,1,1,1,0,1,1],
    "-": [0,0,0,0,0,0,1],

    // letters for OFLO
    "O": [1,1,1,1,1,1,0],         // same as 0
    "F": [1,0,0,0,1,1,1],         // a, e, f, g
    "L": [0,0,0,1,1,1,0],         // d, e, f

    // blank
    " ": [0,0,0,0,0,0,0]
  };

  function clampForDisplay(s){
    s = String(s);
    if (s.length <= MAX_DIGITS) return s;
    if (s[0] === "-") return "-" + s.slice(-(MAX_DIGITS-1));
    return s.slice(-MAX_DIGITS);
  }

  function setOverflow(){
    overflow = true;
    op = null;
    reset = true;
    update();
  }

  function fitsDigits(n){
    const s = String(Math.trunc(n));
    if (s.length <= MAX_DIGITS) return true;
    if (s[0] === "-" && s.length <= MAX_DIGITS) return true;
    return false;
  }

  function clearSVG(){
    while (svg.firstChild) svg.removeChild(svg.firstChild);
  }

  function line(x1,y1,x2,y2,stroke,w){
    const el = document.createElementNS("http://www.w3.org/2000/svg","line");
    el.setAttribute("x1",x1); el.setAttribute("y1",y1);
    el.setAttribute("x2",x2); el.setAttribute("y2",y2);
    el.setAttribute("stroke",stroke);
    el.setAttribute("stroke-width",w);
    el.setAttribute("stroke-linecap","square");
    return el;
  }

  function render7Seg(text){
    clearSVG();

    const W = svg.clientWidth || 340;
    const H = svg.clientHeight || 64;

    const FORCE_W = Math.max(W, 340);
    svg.setAttribute("viewBox", `0 0 ${FORCE_W} ${H}`);

    const dw = 26;
    const dh = 46;
    const gap = 7;
    const stroke = 5;
    const pad = 10;

    const s = String(text);
    const n = s.length;
    const totalW = n * dw + (n - 1) * gap;

    let x = Math.max(pad, FORCE_W - pad - totalW);
    const y = (H - dh) / 2;

    // darker green "ink"
    const on  = "rgba(2, 26, 14, .78)";
    const off = "rgba(2, 26, 14, .08)";

    for (let i = 0; i < n; i++){
      const ch = s[i];
      const seg = DIG[ch] || DIG["0"];

      const x0 = x + i * (dw + gap);
      const y0 = y;

      const p = 4;

      const a = [x0+p,      y0+p,        x0+dw-p,   y0+p];
      const b = [x0+dw-p,   y0+p,        x0+dw-p,   y0+dh/2-p];
      const c = [x0+dw-p,   y0+dh/2+p,   x0+dw-p,   y0+dh-p];
      const d = [x0+p,      y0+dh-p,     x0+dw-p,   y0+dh-p];
      const e = [x0+p,      y0+dh/2+p,   x0+p,      y0+dh-p];
      const f = [x0+p,      y0+p,        x0+p,      y0+dh/2-p];
      const g = [x0+p,      y0+dh/2,     x0+dw-p,   y0+dh/2];

      const segs = [a,b,c,d,e,f,g];

      for (let k = 0; k < 7; k++){
        const [x1,y1,x2,y2] = segs[k];
        svg.appendChild(line(x1,y1,x2,y2, seg[k] ? on : off, stroke));
      }
    }
  }

  function getDisplayText(){
    if (overflow){
      return blinkPhase ? "OFLO" : "    ";
    }
    return clampForDisplay(current);
  }

  function update(){
    render7Seg(getDisplayText());
  }

  function clearAll(){
    current = "0";
    total = 0;
    op = null;
    reset = false;
    overflow = false;
    update();
  }

  function apply(v){
    if (op === null) total = v;
    else if (op === "+") total += v;
    else if (op === "-") total -= v;

    if (!fitsDigits(total)) setOverflow();
  }

  function digit(d){
    if (overflow) return;

    if (reset){
      current = "0";
      reset = false;
    }

    // HARD CAP -> overflow screen
    if (current.length >= MAX_DIGITS){
      setOverflow();
      return;
    }

    current = (current === "0") ? d : (current + d);
    update();
  }

  function oper(o){
    if (overflow) return;

    apply(+current);
    if (overflow) return;

    op = o;
    current = clampForDisplay(total);
    reset = true;
    update();
  }

  function equals(){
    if (overflow) return;

    apply(+current);
    if (overflow) return;

    op = null;
    current = clampForDisplay(total);
    reset = true;
    update();
  }

  document.body.addEventListener("click", (e) => {
    const b = e.target.closest("button");
    if (!b) return;
    const k = b.dataset.k;

    // If overflowed, ONLY C works
    if (overflow && k !== "C") return;

    if (k >= "0" && k <= "9") digit(k);
    else if (k === "+") oper("+");
    else if (k === "-" || k === "−") oper("-");
    else if (k === "=") equals();
    else if (k === "C") clearAll();
  });

  // Blink timer for OFLO
  setInterval(() => {
    blinkPhase = !blinkPhase;
    update();
  }, BLINK_MS);

  window.addEventListener("resize", update);
  update();
</script>
</body>
</html>
